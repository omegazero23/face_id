(function(){"use strict";var e={7947:function(e,a,t){var o=t(3751),n=t(641);const r={id:"app"};function s(e,a,t,o,s,i){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(l)])}var i={name:"App"},l=t(6262);const c=(0,l.A)(i,[["render",s]]);var u=c,d=(t(8992),t(7550),t(5220)),v=t(5537),p=t(8987),g=(t(4114),t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(4979),t(953)),m=t(33),h=t.p+"img/logo_trans.51251fce.png",f=t(517),b=t(5365),k=t(9646),x=t(8465),y=t.n(x),w=t(5059);const E={class:"min-h-screen bg-gray-100 flex items-center justify-center p-4"},L={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative"},C={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},F={class:"text-2xl font-bold text-center mb-6"},_={key:0,class:"space-y-4"},A={key:1,class:"space-y-6"},R=["src"],I={class:"text-gray-500"},T=["src"],P={class:"text-gray-500"},S=["disabled"],j={key:2,class:"space-y-6"},$=["src"],B={class:"text-gray-500"},O=["disabled"],V={key:0,class:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded relative",role:"alert"},D={class:"block sm:inline"},M={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},N={class:"bg-white p-6 rounded-lg shadow-xl w-11/12 max-w-2xl"},K={class:"flex justify-between items-center mb-4"};var X={__name:"FileUploadPage",setup(e){const a=(0,g.KR)("main"),t=(0,g.KR)(null),r=(0,g.KR)(null),s=(0,g.KR)(null),i=(0,g.KR)(""),l=(0,g.KR)(""),c=(0,g.KR)(""),u=(0,g.KR)(""),v=(0,g.KR)(!1),x=(0,g.KR)(null),X=(0,g.KR)(null),z=(0,g.KR)(null),H=(0,d.rd)(),W=p.A.get("token"),q=(0,g.Kh)({ineFront:!1,ineBack:!1,passport:!1}),G=(0,g.KR)(null),Q=(0,g.KR)(null),Y=(0,g.KR)(null),U=(0,g.KR)(0),J=(0,n.EW)((()=>q.ineFront?i.value:q.ineBack?l.value:q.passport?c.value:""));(0,n.sV)((async()=>{try{console.log("VUE_APP_STAGE:","https://ae60-187-188-165-253.ngrok-free.app/get_stage");const e=await fetch("https://ae60-187-188-165-253.ngrok-free.app/get_stage",{method:"GET",headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json",Accept:"application/json","ngrok-skip-browser-warning":"true"},mode:"cors"});if(console.log("Response status:",e.status),console.log("Headers:",Object.fromEntries(e.headers.entries())),!e.ok)throw new Error(`HTTP error! status: ${e.body}`);const a=e.headers.get("content-type");if(!a||!a.includes("application/json")){const a=await e.text();throw new Error(`HTTP error! status: ${e.status}, body: ${a}`)}if(e.ok){const a=await e.json();console.log("Stage:",a);const t={PROCESS_AND_VALIDATE_DOC:"/",VALIDATE_IDENTITY:"/verificacion-biometrica",VERIFY_LIVENESS:"/verify_liveness",COMPLETED:"/success"},o=t[a.stage];if(o&&o!==H.currentRoute.value.path)return void H.push(o);console.log("El stage actual coincide con la ruta, no se hace redirecci贸n.")}y().fire({title:"Instrucciones para subir INE o Pasaporte",html:'\n        <ul style="text-align: left;">\n          <li>Aseg煤rate de que el documento est茅 bien iluminado.</li>\n          <li>Evita reflejos o sombras en el documento.</li>\n          <li>Aseg煤rate de que todo el documento sea visible y legible.</li>\n          <li>No cubras ninguna parte del documento con tus dedos.</li>\n          <li>Sube una imagen en formato JPG o PNG.</li>\n          <li>El tama帽o del archivo no debe exceder los 5MB.</li>\n        </ul>\n      ',icon:"info",confirmButtonText:"Aceptar"})}catch(e){console.error("Error checking stage:",e)}}));const Z=()=>{a.value="main",t.value=null,r.value=null,s.value=null,i.value="",l.value="",c.value="",u.value="",q.ineFront=!1,q.ineBack=!1,q.passport=!1,U.value=0},ee=e=>{"ineFront"===e?x.value.click():"ineBack"===e?X.value.click():"passport"===e&&z.value.click()},ae=(e,a)=>{const o=a.target.files[0];if(o){const a=new FileReader;a.onload=a=>{"ineFront"===e?(t.value=o,i.value=a.target.result,q.ineFront=!0):"ineBack"===e?(r.value=o,l.value=a.target.result,q.ineBack=!0):"passport"===e&&(s.value=o,c.value=a.target.result,q.passport=!0),G.value=e,U.value=0},a.readAsDataURL(o)}},te=e=>{Q.value=e,console.log("Crop coordinates:",e.coordinates)},oe=()=>{U.value=(U.value+90)%360,Y.value&&Y.value.rotate(90)},ne=()=>{if(Q.value&&Q.value.canvas){const{width:e,height:a}=Q.value.coordinates,o=Q.value.canvas.toDataURL("image/jpeg",.8);"ineFront"===G.value?(i.value=o,t.value=se(o,`ineFront_${e}x${a}_rot${U.value}.jpg`),q.ineFront=!1):"ineBack"===G.value?(l.value=o,r.value=se(o,`ineBack_${e}x${a}_rot${U.value}.jpg`),q.ineBack=!1):"passport"===G.value&&(c.value=o,s.value=se(o,`passport_${e}x${a}_rot${U.value}.jpg`),q.passport=!1)}G.value=null,Q.value=null,U.value=0},re=()=>{"ineFront"===G.value?q.ineFront=!1:"ineBack"===G.value?q.ineBack=!1:"passport"===G.value&&(q.passport=!1),G.value=null,Q.value=null,U.value=0},se=(e,a)=>{const t=e.split(","),o=t[0].match(/:(.*?);/)[1],n=atob(t[1]);let r=n.length;const s=new Uint8Array(r);while(r--)s[r]=n.charCodeAt(r);return new File([s],a,{type:o})},ie=async()=>{if(t.value&&r.value){v.value=!0,u.value="";try{const e=await new Promise(((e,a)=>{navigator.geolocation.getCurrentPosition(e,a)})),a=new FormData;a.append("ineFront",t.value),a.append("ineBack",r.value),a.append("latitude",e.coords.latitude),a.append("longitude",e.coords.longitude),console.log("Coordenadas:",e.coords.latitude,e.coords.longitude);const o=await fetch("https://ae60-187-188-165-253.ngrok-free.app/process_and_validate_ine",{method:"POST",body:a,headers:{Authorization:`Bearer ${W}`,"ngrok-skip-browser-warning":"true"}});if(!o.ok)throw new Error("Error al subir los archivos de INE");const n=await o.json();console.log("Archivos de INE subidos exitosamente:",n),H.push("/verificacion-biometrica")}catch(e){console.error("Error:",e),u.value=e.message}finally{v.value=!1}}},le=async()=>{if(s.value){v.value=!0,u.value="";try{const e=await new Promise(((e,a)=>{navigator.geolocation.getCurrentPosition(e,a)})),a=new FormData;a.append("passport",s.value),a.append("latitude",e.coords.latitude),a.append("longitude",e.coords.longitude),console.log("Coordenadas:",e.coords.latitude,e.coords.longitude);const t=await fetch("https://ae60-187-188-165-253.ngrok-free.app/process_and_validate_passport",{method:"POST",body:a,headers:{Authorization:`Bearer ${W}`}});if(!t.ok)throw new Error("Error al subir el archivo de Pasaporte");const o=await t.json();console.log("Archivo de Pasaporte subido exitosamente:",o),H.push("/verificacion-biometrica")}catch(e){console.error("Error:",e),u.value=e.message}finally{v.value=!1}}};return(e,d)=>((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("div",L,[(0,n.bF)(o.eB,{name:"fade"},{default:(0,n.k6)((()=>[v.value?((0,n.uX)(),(0,n.CE)("div",C,d[8]||(d[8]=[(0,n.Lk)("div",{class:"text-center"},[(0,n.Lk)("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-black mb-4"}),(0,n.Lk)("p",{class:"text-gray-700 font-semibold"},"Procesando...")],-1)]))):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(o.eB,{name:"fade"},{default:(0,n.k6)((()=>["main"!==a.value?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:Z,class:"mb-4 flex items-center text-gray-600 hover:text-gray-800 transition-colors duration-200"},[(0,n.bF)((0,g.R1)(f.A),{class:"h-5 w-5 mr-1"}),d[9]||(d[9]=(0,n.eW)(" Regresar "))])):(0,n.Q3)("",!0)])),_:1}),d[16]||(d[16]=(0,n.Lk)("img",{src:h,alt:"SoftCr茅dito Logo",class:"w-64 mx-auto mb-6"},null,-1)),(0,n.Lk)("h2",F,(0,m.v_)("main"===a.value?"Subir INE o Pasaporte":"ine"===a.value?"Subir INE":"Subir Pasaporte"),1),(0,n.bF)(o.eB,{name:"fade",mode:"out-in"},{default:(0,n.k6)((()=>["main"===a.value?((0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("button",{onClick:d[0]||(d[0]=e=>a.value="ine"),class:"w-full bg-black text-white rounded-md py-3 px-4 hover:bg-gray-800 transition-colors duration-200"}," Subir INE "),(0,n.Lk)("button",{onClick:d[1]||(d[1]=e=>a.value="passport"),class:"w-full bg-black text-white rounded-md py-3 px-4 hover:bg-gray-800 transition-colors duration-200"}," Subir Pasaporte ")])):"ine"===a.value?((0,n.uX)(),(0,n.CE)("div",A,[(0,n.Lk)("div",null,[d[10]||(d[10]=(0,n.Lk)("h3",{class:"text-lg font-medium mb-2"},"INE Frente",-1)),(0,n.Lk)("div",{class:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-gray-400 transition-colors duration-200",onClick:d[3]||(d[3]=e=>ee("ineFront"))},[(0,n.Lk)("input",{type:"file",ref_key:"ineFrontInput",ref:x,class:"hidden",onChange:d[2]||(d[2]=e=>ae("ineFront",e)),accept:"image/*",capture:"environment"},null,544),t.value?((0,n.uX)(),(0,n.CE)("img",{key:1,src:i.value,alt:"INE Frente Preview",class:"max-h-40 mx-auto mb-2"},null,8,R)):((0,n.uX)(),(0,n.Wv)((0,g.R1)(b.A),{key:0,class:"h-8 w-8 mx-auto mb-2 text-gray-400"})),(0,n.Lk)("p",I,(0,m.v_)(t.value?t.value.name:"Elige archivo para INE Frente"),1)])]),(0,n.Lk)("div",null,[d[11]||(d[11]=(0,n.Lk)("h3",{class:"text-lg font-medium mb-2"},"INE Reverso",-1)),(0,n.Lk)("div",{class:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-gray-400 transition-colors duration-200",onClick:d[5]||(d[5]=e=>ee("ineBack"))},[(0,n.Lk)("input",{type:"file",ref_key:"ineBackInput",ref:X,class:"hidden",onChange:d[4]||(d[4]=e=>ae("ineBack",e)),accept:"image/*",capture:"environment"},null,544),r.value?((0,n.uX)(),(0,n.CE)("img",{key:1,src:l.value,alt:"INE Reverso Preview",class:"max-h-40 mx-auto mb-2"},null,8,T)):((0,n.uX)(),(0,n.Wv)((0,g.R1)(b.A),{key:0,class:"h-8 w-8 mx-auto mb-2 text-gray-400"})),(0,n.Lk)("p",P,(0,m.v_)(r.value?r.value.name:"Elige archivo para INE Reverso"),1)])]),(0,n.Lk)("button",{onClick:ie,class:"w-full bg-black text-white rounded-md py-3 px-4 hover:bg-gray-800 transition-colors duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t.value||!r.value||v.value},[(0,n.bF)((0,g.R1)(b.A),{class:"h-5 w-5 mr-2"}),d[12]||(d[12]=(0,n.eW)(" Subir INE (Frente y Reverso) "))],8,S)])):"passport"===a.value?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("div",null,[d[13]||(d[13]=(0,n.Lk)("h3",{class:"text-lg font-medium mb-2"},"Pasaporte",-1)),(0,n.Lk)("div",{class:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-gray-400 transition-colors duration-200",onClick:d[7]||(d[7]=e=>ee("passport"))},[(0,n.Lk)("input",{type:"file",ref_key:"passportInput",ref:z,class:"hidden",onChange:d[6]||(d[6]=e=>ae("passport",e)),accept:"image/*",capture:"environment"},null,544),s.value?((0,n.uX)(),(0,n.CE)("img",{key:1,src:c.value,alt:"Pasaporte Preview",class:"max-h-40 mx-auto mb-2"},null,8,$)):((0,n.uX)(),(0,n.Wv)((0,g.R1)(b.A),{key:0,class:"h-8 w-8 mx-auto mb-2 text-gray-400"})),(0,n.Lk)("p",B,(0,m.v_)(s.value?s.value.name:"Elige archivo para Pasaporte"),1)])]),(0,n.Lk)("button",{onClick:le,class:"w-full bg-black text-white rounded-md py-3 px-4 hover:bg-gray-800 transition-colors duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:!s.value||v.value},[(0,n.bF)((0,g.R1)(b.A),{class:"h-5 w-5 mr-2"}),d[14]||(d[14]=(0,n.eW)(" Subir Pasaporte "))],8,O)])):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(o.eB,{name:"fade"},{default:(0,n.k6)((()=>[u.value?((0,n.uX)(),(0,n.CE)("div",V,[d[15]||(d[15]=(0,n.Lk)("strong",{class:"font-bold"},"Error:",-1)),(0,n.Lk)("span",D,(0,m.v_)(u.value),1)])):(0,n.Q3)("",!0)])),_:1})]),(0,n.bF)(o.eB,{name:"fade"},{default:(0,n.k6)((()=>[q.ineFront||q.ineBack||q.passport?((0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("div",N,[d[18]||(d[18]=(0,n.Lk)("h3",{class:"text-lg font-bold mb-4"},"Recortar imagen",-1)),J.value?((0,n.uX)(),(0,n.Wv)((0,g.R1)(w.IO),{key:0,class:"h-96 mb-4",src:J.value,onChange:te,"stencil-props":{aspectRatio:1.6},"default-size":{width:400,height:250},"resize-image":{touch:!0,wheel:!0,zoom:!0},transitions:!0,canvas:{width:1e3,height:1e3},"image-restriction":"stencil",ref_key:"cropperRef",ref:Y},null,8,["src"])):(0,n.Q3)("",!0),(0,n.Lk)("div",K,[(0,n.Lk)("button",{onClick:oe,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300"},[(0,n.bF)((0,g.R1)(k.A),{class:"h-5 w-5"}),d[17]||(d[17]=(0,n.eW)(" Rotar "))]),(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:re,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 mr-2"}," Cancelar "),(0,n.Lk)("button",{onClick:ne,class:"px-4 py-2 bg-black text-white rounded hover:bg-gray-800"}," Finalizar recorte ")])])])])):(0,n.Q3)("",!0)])),_:1})]))}};const z=(0,l.A)(X,[["__scopeId","data-v-69f28285"]]);var H=z;const W={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50 p-4"},q={class:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full text-center"},G={key:0,class:"flex flex-col items-center"},Q={class:"flex justify-center mb-6"},Y={class:"relative"},U={key:1,class:"text-center"},J={class:"mb-6"},Z={class:"text-gray-600 mb-4"};function ee(e,a,t,o,r,s){const i=(0,n.g2)("LockIcon"),l=(0,n.g2)("XCircleIcon");return(0,n.uX)(),(0,n.CE)("div",W,[(0,n.Lk)("div",q,[o.loading?((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("div",Q,[(0,n.Lk)("div",Y,[a[1]||(a[1]=(0,n.Lk)("div",{class:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin"},null,-1)),(0,n.bF)(i,{class:"w-8 h-8 text-blue-500 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})])]),a[2]||(a[2]=(0,n.Lk)("h1",{class:"text-2xl font-semibold text-gray-900 mb-2"}," Verificando Acceso ",-1)),a[3]||(a[3]=(0,n.Lk)("p",{class:"text-gray-600 mb-4"}," Estamos verificando tu token de acceso. Por favor, espera un momento. ",-1)),a[4]||(a[4]=(0,n.Lk)("div",{class:"bg-blue-50 border-l-4 border-blue-400 p-4 text-left"},[(0,n.Lk)("p",{class:"text-blue-700"}," Este proceso puede tardar unos segundos. Gracias por tu paciencia. ")],-1))])):(0,n.Q3)("",!0),o.error?((0,n.uX)(),(0,n.CE)("div",U,[(0,n.Lk)("div",J,[(0,n.bF)(l,{class:"w-16 h-16 text-red-500 mx-auto"})]),a[5]||(a[5]=(0,n.Lk)("h1",{class:"text-2xl font-semibold text-gray-900 mb-2"}," Error de Verificaci贸n ",-1)),(0,n.Lk)("p",Z,(0,m.v_)(o.error),1),(0,n.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>o.retryValidation&&o.retryValidation(...e)),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"}," Intentar nuevamente ")])):(0,n.Q3)("",!0)])])}var ae=t(2551),te=t(7149),oe={name:"RegisterPage",components:{LockIcon:ae.A,XCircleIcon:te.A},setup(){const e=(0,d.rd)(),a=(0,g.KR)(!0),t=(0,g.KR)(null),o=new Date((new Date).getTime()+9e5),r=async(n,r,s)=>{try{console.log("https://ae60-187-188-165-253.ngrok-free.app/login/");const a=await fetch(`https://ae60-187-188-165-253.ngrok-free.app/login/${n}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({latitude:r,longitude:s})});console.log("Status:",a.status),console.log("Headers:",Object.fromEntries(a.headers));const t=await a.json();if(console.log("Datos recibidos:",t),console.log("Status:",t.stage),console.log("success"===t.status),!0!==t.valid)throw new Error("Error validando el token");p.A.set("token",n,{expires:o}),e.push("/")}catch(i){console.error("Error en validaci贸n:",i),t.value="No se pudo validar tu acceso. Por favor, intenta nuevamente.",a.value=!1}},s=()=>{a.value=!0,t.value=null;const o=e.currentRoute.value.params.jwt;i(o)},i=e=>{navigator.geolocation.getCurrentPosition((a=>{const t=a.coords.latitude,n=a.coords.longitude;r(e,t,n),p.A.set("token",e,{expires:o})}),(e=>{console.error("Error al obtener las coordenadas:",e),t.value="Los permisos de ubicaci贸n son obligatorios para continuar. Por favor, habilita el acceso a tu ubicaci贸n e intenta nuevamente.",a.value=!1}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})};return(0,n.sV)((()=>{const o=e.currentRoute.value.params.jwt;if(!o)return t.value="Token no proporcionado",void(a.value=!1);i(o)})),{loading:a,error:t,retryValidation:s}}};const ne=(0,l.A)(oe,[["render",ee],["__scopeId","data-v-2989bacc"]]);var re=ne;const se={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50 p-4"},ie={class:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full"},le={class:"flex justify-center mb-6"},ce={class:"bg-red-100 rounded-full p-4"};var ue={__name:"ErrorPage",setup(e){return(e,a)=>((0,n.uX)(),(0,n.CE)("div",se,[(0,n.Lk)("div",ie,[(0,n.Lk)("div",le,[(0,n.Lk)("div",ce,[(0,n.bF)((0,g.R1)(ae.A),{class:"w-8 h-8 text-red-400"})])]),a[0]||(a[0]=(0,n.Fv)('<h1 class="text-2xl font-semibold text-gray-900 text-center mb-2"> Acceso Denegado </h1><p class="text-gray-600 text-center mb-2"> Error 401 </p><p class="text-gray-600 text-center mb-6"> Lo sentimos, pero no podemos procesar tu solicitud en este momento. </p><div class="bg-amber-50 border-l-4 border-amber-400 p-4 mb-6"><p class="text-amber-700 mb-2"> Tu token ha expirado o es inv谩lido. Esto puede ocurrir si: </p><ul class="text-amber-700 list-disc pl-5 space-y-1"><li>Has utilizado un enlace antiguo</li><li>El enlace ha caducado por razones de seguridad</li><li>Has cerrado sesi贸n recientemente</li></ul></div><p class="text-gray-600 text-center text-sm"> Si el problema persiste, por favor contacta a nuestro <a href="#" class="text-blue-500 hover:text-blue-600">equipo de soporte</a>. </p>',5))])]))}};const de=ue;var ve=de;const pe={class:"container"},ge={class:"video-container"},me={ref:"videoRef",class:"video-element",autoplay:"",playsinline:""},he={ref:"canvasRef",class:"output-canvas"},fe={class:"message"},be=["disabled"],ke={key:0,class:"loading-overlay"};function xe(e,a,t,o,r,s){return(0,n.uX)(),(0,n.CE)("div",pe,[a[2]||(a[2]=(0,n.Lk)("img",{src:"/logo_trans.png",alt:"Logo",class:"logo"},null,-1)),(0,n.Lk)("div",ge,[(0,n.Lk)("video",me,null,512),(0,n.Lk)("canvas",he,null,512)]),(0,n.Lk)("div",fe,(0,m.v_)(o.message),1),(0,n.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>o.captureImage&&o.captureImage(...e)),disabled:!o.criteriaMet||o.isCapturing,class:(0,m.C4)(["capture-button",{enabled:o.criteriaMet}])}," Estoy listo ",10,be),o.isLoading?((0,n.uX)(),(0,n.CE)("div",ke,a[1]||(a[1]=[(0,n.Lk)("div",{class:"loading-content"},[(0,n.Lk)("div",{class:"spinner"}),(0,n.Lk)("p",null,"Cargando...")],-1)]))):(0,n.Q3)("",!0)])}var ye=t(7866),we=t(2726),Ee=t(9398),Le={setup(){const e=(0,g.KR)(null),a=(0,g.KR)(null),t=(0,g.KR)("Ajusta tu posici贸n para centrar tu rostro."),o=(0,g.KR)(!1),r=(0,g.KR)(!1),s=(0,g.KR)(!1),i=(0,d.rd)();let l=null,c=null;(0,n.sV)((()=>{u(),v(),m(),y().fire({title:"Reglas para la Verificaci贸n Biom茅trica",html:'\n          <ul style="text-align: left;">\n            <li>Aseg煤rate de que tu rostro est茅 bien iluminado.</li>\n            <li>Evita usar gafas o sombreros.</li>\n            <li>Mant茅n una expresi贸n neutral.</li>\n            <li>Coloca tu rostro dentro del 贸valo en la pantalla.</li>\n            <li>No te muevas mientras se captura la imagen.</li>\n          </ul>\n        ',icon:"info",confirmButtonText:"Aceptar"})})),(0,n.hi)((()=>{l&&l.stop()}));const u=async()=>{const e=p.A.get("token");try{const a=await fetch("https://ae60-187-188-165-253.ngrok-free.app/get_stage",{headers:{Authorization:`Bearer ${e}`,"ngrok-skip-browser-warning":"true"}});if(a.ok){const e=await a.json(),t={PROCESS_AND_VALIDATE_DOC:"/",VALIDATE_IDENTITY:"/verificacion-biometrica",VERIFY_LIVENESS:"/verify_liveness",COMPLETED:"/success"},o=t[e.stage];if(o&&o!==window.location.pathname)return void i.push(o)}}catch(a){console.error("Error checking stage:",a)}},v=()=>{e.value&&(l=new ye.Camera(e.value,{onFrame:async()=>{await c.send({image:e.value})},width:640,height:480}),l.start())},m=()=>{c=new we.FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`}),c.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),c.onResults(h)},h=e=>{if(a.value){const n=a.value.getContext("2d");if(n.save(),n.clearRect(0,0,a.value.width,a.value.height),n.drawImage(e.image,0,0,a.value.width,a.value.height),e.multiFaceLandmarks&&e.multiFaceLandmarks.length>0)for(const a of e.multiFaceLandmarks)(0,Ee.drawConnectors)(n,a,we.FACEMESH_TESSELATION,{color:"#C0C0C070",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_RIGHT_EYE,{color:"#FFFFFF",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_RIGHT_EYEBROW,{color:"#FFFFFF",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_RIGHT_IRIS,{color:"#FFFFFF",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_LEFT_EYE,{color:"#FFFFFF",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_LEFT_EYEBROW,{color:"#FFFFFF",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_LEFT_IRIS,{color:"#FFFFFF",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_FACE_OVAL,{color:"#E0E0E0",lineWidth:.5}),(0,Ee.drawConnectors)(n,a,we.FACEMESH_LIPS,{color:"#E0E0E0",lineWidth:.5}),o.value=f(a);else t.value="No se detect贸 ning煤n rostro. Ajusta tu posici贸n.",o.value=!1;n.restore()}},f=e=>{const o=a.value.width,n=a.value.height,r=e[4],s=r.x*o,i=r.y*n,l=s>.4*o&&s<.6*o&&i>.4*n&&i<.6*n,c=e[33],u=e[263],d=e[61],v=e[291],p=Math.sqrt(Math.pow((u.x-c.x)*o,2)+Math.pow((u.y-c.y)*n,2)),g=Math.sqrt(Math.pow((v.x-d.x)*o,2)+Math.pow((v.y-d.y)*n,2)),m=p>.2*o&&p<.4*o&&g>.2*o&&g<.5*o;return t.value=l?m?"Posici贸n correcta. Puedes capturar la imagen.":"Ac茅rcate o al茅jate de la c谩mara.":"Centra tu rostro en la pantalla.",l&&m},b=async()=>{if(o.value&&e.value){r.value=!0,s.value=!0;try{const a=document.createElement("canvas");a.width=e.value.videoWidth,a.height=e.value.videoHeight,a.getContext("2d").drawImage(e.value,0,0);const o=a.toDataURL("image/jpeg"),n=await k(),r=new FormData;r.append("person_image",x(o),"capture.jpg"),r.append("latitude",n.latitude.toString()),r.append("longitude",n.longitude.toString());const s=p.A.get("token"),l=await fetch("https://ae60-187-188-165-253.ngrok-free.app/ValidateIdenty",{method:"POST",body:r,headers:{Authorization:`Bearer ${s}`}}),c=await l.json();l.status>=400?(y().fire({title:"Error",text:"Vuelve a tomar la imagen siguiendo las indicaciones.",icon:"error",confirmButtonText:"Aceptar"}).then((()=>{window.location.reload()})),t.value=c.error):(y().fire({title:"xito",text:c.message,icon:"success",confirmButtonText:"Aceptar"}).then((e=>{e.isConfirmed&&i.push("/verify_liveness")})),t.value=c.message)}catch(a){console.error(a),y().fire({title:"Error",text:"Vuelve a tomar la imagen siguiendo las indicaciones.",icon:"error",confirmButtonText:"Aceptar"}).then((()=>{window.location.reload()})),t.value="Error al enviar la imagen."}finally{r.value=!1,s.value=!1}}},k=()=>new Promise(((e,a)=>{navigator.geolocation.getCurrentPosition((a=>e(a.coords)),(e=>a(e)))})),x=e=>{const a=atob(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(a.length),n=new Uint8Array(o);for(let r=0;r<a.length;r++)n[r]=a.charCodeAt(r);return new Blob([o],{type:t})};return{videoRef:e,canvasRef:a,message:t,criteriaMet:o,isCapturing:r,isLoading:s,captureImage:b}}};const Ce=(0,l.A)(Le,[["render",xe],["__scopeId","data-v-a9a27058"]]);var Fe=Ce,_e=(t(4520),t(3082));const Ae={class:"container"},Re={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-10"},Ie={class:"content-wrapper"},Te={class:"video-container"},Pe={class:"message"},Se={class:"progress-bar"},je=["disabled"],$e=1400;var Be={__name:"verify_liveness",setup(e){const a=p.A.get("token"),t=(0,g.KR)(null),r=(0,g.KR)(null),s=(0,g.KR)(null),i=(0,g.KR)(null),l=(0,g.KR)('C谩mara lista. Presiona "Iniciar Verificaci贸n" para comenzar'),c=(0,g.KR)(!1),u=(0,g.KR)(20),v=(0,g.KR)(0),f=(0,g.KR)(!1),b=(0,d.rd)(),k=(0,g.KR)(!1);let x,w,E,L=[],C={left:!1,right:!1,center:!1,phrase:!1},F=0;function _(){const e=[()=>{const e=_e.a.color.human(),a=_e.a.animal.type(),t=_e.a.location.city();return`El ${e} ${a} corre por las calles de ${t}`},()=>{const e=_e.a.person.firstName(),a=_e.a.commerce.product(),t=_e.a.location.city();return`${e} compr贸 un nuevo ${a} ayer en ${t}`},()=>{const e=_e.a.number.int({min:2,max:10}),a=_e.a.commerce.productAdjective(),t=_e.a.commerce.product();return`Los ${e} ${a} ${t} est谩n sobre la mesa`},()=>{const e=_e.a.vehicle.type(),a=_e.a.color.human(),t=_e.a.location.city();return`El ${e} ${a} viaja desde aqu铆 hasta ${t}`},()=>{const e=_e.a.person.firstName(),a=_e.a.animal.pet(),t=_e.a.word.verb();return`Mi amigo ${e} y su ${a} ${t} juntos`}],a=e[Math.floor(Math.random()*e.length)],t=a(),o=t.split(" ").length;return 8!==o?(console.warn(`Frase generada con ${o} palabras: "${t}"`),`El gran ${_e.a.animal.type()} corre por el ${_e.a.location.city()}`):t}let A="";const R=[{message:"Gira lentamente tu cabeza hacia la izquierda",validation:T},{message:"Gira lentamente tu cabeza hacia la derecha",validation:P},{message:"Vuelve lentamente al centro",validation:S},{message:"",validation:null},{message:"隆Verificaci贸n completada!",validation:null}];function I(){u.value=20,c.value=!0,E=setInterval((()=>{u.value--,u.value<=0&&($(),y().fire({title:"Tiempo agotado",text:"No se complet贸 la verificaci贸n en el tiempo establecido",icon:"warning"}))}),1e3)}function T(e){const a=e[33],t=e[263],o=e[1],n=o.x-a.x,r=t.x-o.x,s=.05;return n>r+s}function P(e){const a=e[33],t=e[263],o=e[1],n=o.x-a.x,r=t.x-o.x,s=.05;return r>n+s}function S(e){const a=e[33],t=e[263],o=e[1],n=o.x-a.x,r=t.x-o.x,s=.02;return Math.abs(n-r)<s}function j(){clearInterval(E),c.value=!1}function $(){j(),z(),C={left:!1,right:!1,center:!1,phrase:!1},L=[],f.value=!1,l.value="C谩mara lista. Presiona 'Iniciar Verificaci贸n' para comenzar",v.value=0,F=0}function B(){const e=Object.values(C).filter((e=>e)).length,a=Object.keys(C).length;v.value=e/a*100}function O(e){const a=i.value.getContext("2d");if(a.save(),a.clearRect(0,0,i.value.width,i.value.height),a.drawImage(e.image,0,0,i.value.width,i.value.height),a.scale(-1,1),e.multiFaceLandmarks)for(const t of e.multiFaceLandmarks)(0,Ee.drawConnectors)(a,t,we.FACEMESH_TESSELATION,{color:"#C0C0C070",lineWidth:1}),x&&"recording"===x.state&&V(t);a.restore()}function V(e){const a=Date.now();a-F<$e||(!C.left&&T(e)?(C.left=!0,F=a,l.value="隆Izquierda completado! "+R[1].message,B()):C.left&&!C.right&&P(e)?(C.right=!0,F=a,l.value="隆Derecha completado! "+R[2].message,B()):C.left&&C.right&&!C.center&&S(e)&&(C.center=!0,F=a,A=_(),l.value=`Por favor, di en voz alta: "${A}"`,D(),B()))}function D(){setTimeout((()=>{C.phrase=!0,l.value=R[4].message,B(),setTimeout((()=>{j(),z()}),3e3)}),6e3)}async function M(){w=new we.FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`}),w.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),w.onResults(O)}async function N(e){k.value=!0;const o=new FormData;o.append("video",e,"video_verificacion.webm"),o.append("frase_esperada",A),o.append("latitude",t.value),o.append("longitude",r.value);for(let[a,t]of o.entries())console.log(`${a}: ${t}`);try{const e=await fetch("https://ae60-187-188-165-253.ngrok-free.app/verify-liveness",{method:"POST",body:o,headers:{Authorization:`Bearer ${a}`,"ngrok-skip-browser-warning":"true"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw new TypeError("La respuesta no es JSON");const n=await e.json();n.success?y().fire({title:"隆Verificaci贸n completada!",text:"El video ha sido enviado exitosamente",icon:"success"}).then((()=>{b.push({name:"SuccessProcess"})})):y().fire({title:"Error",text:"Hubo un problema al enviar el video. Intenta nuevamente",icon:"error"}).then((()=>{window.location.reload()}))}catch(n){console.error("Error al enviar el video:",n),y().fire({title:"Error de conexi贸n",text:"No se pudo conectar al servidor. Intenta nuevamente",icon:"error"}).then((()=>{window.location.reload()}))}finally{k.value=!1}}async function K(){try{const e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});s.value.srcObject=e,s.value.width=640,s.value.height=480,i.value.width=640,i.value.height=480,x=new MediaRecorder(e),x.ondataavailable=e=>{e.data.size>0&&L.push(e.data)},x.onstop=()=>{const e=new Blob(L,{type:"video/webm"});N(e),L=[]},await M();const a=new ye.Camera(s.value,{onFrame:async()=>{await w.send({image:s.value})},width:640,height:480});a.start(),l.value="C谩mara lista. Presiona 'Iniciar Verificaci贸n' para comenzar",f.value=!1}catch(e){console.error("Error accessing camera:",e),l.value="Error al acceder a la c谩mara"}}function X(){$(),L=[],x.start(),l.value=R[0].message,f.value=!0,I(),F=Date.now()}function z(){x&&"recording"===x.state&&(x.stop(),f.value=!1)}return(0,n.sV)((async()=>{navigator.geolocation.getCurrentPosition((e=>{t.value=e.coords.latitude,r.value=e.coords.longitude}),(e=>{console.error("Geolocation error:",e)}));const e=p.A.get("token"),a=await fetch("https://ae60-187-188-165-253.ngrok-free.app/get_stage",{method:"GET",headers:{Authorization:`Bearer ${e}`,"ngrok-skip-browser-warning":"true"}});if(console.log("Response status:",a.status),console.log("Response headers:",a.headers),a.ok){const e=await a.json();console.log("Stage:",e),console.log(e.stage);const t={PROCESS_AND_VALIDATE_DOC:"/",VALIDATE_IDENTITY:"/verificacion-biometrica",VERIFY_LIVENESS:"/verify_liveness",COMPLETED:"/success"},o=b.currentRoute.value.path;console.log("Current route:",o);const n=t[e.stage];if(n&&n!==o)return b.push(n),void console.log("Redirigiendo a:",n);console.log("El stage actual coincide con la ruta, no se hace redirecci贸n.")}y().fire({title:"Instrucciones para la prueba de vida",html:'\n      <ul style="text-align: left;">\n        <li>Por favor, aseg煤rese de que su rostro est茅 bien iluminado y completamente visible.</li>\n        <li>Mire hacia la izquierda durante unos segundos.</li>\n        <li>Mire hacia la derecha durante unos segundos.</li>\n        <li>Mire directamente al centro de la c谩mara.</li>\n        <li>Finalmente, pronuncie claramente la frase que se le indicar谩 en pantalla.</li>\n      </ul>\n      ',icon:"info",confirmButtonText:"Aceptar"}),await K()})),(e,a)=>((0,n.uX)(),(0,n.CE)("div",Ae,[(0,n.bF)(o.eB,{name:"fade"},{default:(0,n.k6)((()=>[k.value?((0,n.uX)(),(0,n.CE)("div",Re,a[0]||(a[0]=[(0,n.Lk)("div",{class:"text-center"},[(0,n.Lk)("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-black mb-4"}),(0,n.Lk)("p",{class:"text-gray-700 font-semibold"},"Procesando...")],-1)]))):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",Ie,[a[1]||(a[1]=(0,n.Lk)("img",{src:h,alt:"SoftCr茅dito",class:"logo"},null,-1)),(0,n.Lk)("div",Te,[(0,n.Lk)("video",{ref_key:"inputVideo",ref:s,autoplay:""},null,512),(0,n.Lk)("canvas",{ref_key:"outputCanvas",ref:i},null,512)]),(0,n.Lk)("div",Pe,(0,m.v_)(l.value),1),(0,n.bo)((0,n.Lk)("div",Se,[(0,n.Lk)("div",{class:"progress",style:(0,m.Tr)({width:`${v.value}%`})},null,4)],512),[[o.aG,f.value]]),(0,n.Lk)("button",{onClick:X,disabled:f.value,class:"verification-button"}," Iniciar Verificaci贸n ",8,je)])]))}};const Oe=(0,l.A)(Be,[["__scopeId","data-v-65a9acd0"]]);var Ve=Oe;const De={class:"min-h-screen flex items-center justify-center bg-gray-100 overflow-hidden"},Me={key:0,class:"confetti-container"};var Ne={__name:"SuccessProcess",setup(e){const a=(0,d.rd)(),t=(0,g.KR)(!1),o=()=>{t.value=!0,setTimeout((()=>{t.value=!1}),5e3)};return(0,n.sV)((async()=>{const e=p.A.get("token"),t=await fetch("https://ae60-187-188-165-253.ngrok-free.app/get_stage",{method:"GET",headers:{Authorization:`Bearer ${e}`,"ngrok-skip-browser-warning":"true"}});if(console.log("Response status:",t.status),console.log("Response headers:",t.headers),t.ok){const e=await t.json();console.log("Stage:",e),console.log(e.stage);const o={PROCESS_AND_VALIDATE_DOC:"/",VALIDATE_IDENTITY:"/verificacion-biometrica",VERIFY_LIVENESS:"/verify_liveness",COMPLETED:"/success"},n=o[e.stage];if(n&&n!==a.currentRoute.value.path)return void a.push(n);console.log("El stage actual coincide con la ruta, no se hace redirecci贸n.")}})),(e,a)=>((0,n.uX)(),(0,n.CE)("div",De,[(0,n.Lk)("div",{class:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full relative"},[a[0]||(a[0]=(0,n.Fv)('<div class="text-center" data-v-215caa62><svg class="mx-auto h-16 w-16 text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-215caa62><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke-linecap="round" stroke-linejoin="round" data-v-215caa62></path><path d="M22 4L12 14.01l-3-3" stroke-linecap="round" stroke-linejoin="round" data-v-215caa62></path></svg><h1 class="mt-4 text-3xl font-bold text-gray-900" data-v-215caa62>隆Listo!</h1></div><div class="mt-6 text-center" data-v-215caa62><p class="text-xl text-gray-700" data-v-215caa62>Terminaste el proceso correctamente</p><p class="mt-2 text-gray-600" data-v-215caa62>Lograste validar tu identidad de manera exitosa.</p></div>',2)),(0,n.Lk)("div",{class:"mt-8 flex justify-center"},[(0,n.Lk)("button",{onClick:o,class:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75 transition duration-300 ease-in-out"}," Felicidades!  ")])]),t.value?((0,n.uX)(),(0,n.CE)("div",Me,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(50,(e=>(0,n.Lk)("div",{key:e,class:"confetti",style:(0,m.Tr)({"--delay":5*Math.random()+"s","--x":100*Math.random()+"%"})},null,4))),64))])):(0,n.Q3)("",!0)]))}};const Ke=(0,l.A)(Ne,[["__scopeId","data-v-215caa62"]]);var Xe=Ke,ze=t(920),He=t(4771);const We={class:"min-h-screen flex items-center justify-center bg-gray-100"},qe={class:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full"},Ge={class:"text-center"},Qe={class:"mt-8 space-y-4"},Ye={class:"flex items-center justify-center space-x-2 text-yellow-600"},Ue={key:0,class:"mt-6 text-sm text-gray-600"};var Je={__name:"PendingApproval",setup(e){const a=(0,g.KR)(!1),t=()=>{a.value=!a.value};return(e,o)=>((0,n.uX)(),(0,n.CE)("div",We,[(0,n.Lk)("div",qe,[(0,n.Lk)("div",Ge,[(0,n.bF)((0,g.R1)(ze.A),{class:"mx-auto h-16 w-16 text-yellow-500"}),o[0]||(o[0]=(0,n.Lk)("h1",{class:"mt-4 text-3xl font-bold text-gray-900"},"Pendiente de Aprobaci贸n",-1))]),o[3]||(o[3]=(0,n.Lk)("div",{class:"mt-6 text-center"},[(0,n.Lk)("p",{class:"text-xl text-gray-700"},"Tu documento de identificaci贸n est谩 en revisi贸n"),(0,n.Lk)("p",{class:"mt-2 text-gray-600"},"Te avisaremos cuando hayamos completado el proceso de validaci贸n.")],-1)),(0,n.Lk)("div",Qe,[(0,n.Lk)("div",Ye,[(0,n.bF)((0,g.R1)(He.A),{class:"h-5 w-5"}),o[1]||(o[1]=(0,n.Lk)("span",{class:"text-sm font-medium"},"Este proceso puede tomar hasta 48 horas h谩biles",-1))]),(0,n.Lk)("button",{onClick:t,class:"w-full px-6 py-3 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-opacity-75 transition duration-300 ease-in-out"}," 驴Qu茅 sigue? ")]),a.value?((0,n.uX)(),(0,n.CE)("div",Ue,o[2]||(o[2]=[(0,n.Lk)("h2",{class:"font-semibold mb-2"},"Pr贸ximos pasos:",-1),(0,n.Lk)("ul",{class:"list-disc list-inside space-y-1"},[(0,n.Lk)("li",null,"Recibir谩s un correo electr贸nico con el resultado de la validaci贸n."),(0,n.Lk)("li",null,"Si se requiere informaci贸n adicional, te contactaremos."),(0,n.Lk)("li",null,"Una vez aprobado, podr谩s continuar con el proceso.")],-1)]))):(0,n.Q3)("",!0)])]))}};const Ze=(0,l.A)(Je,[["__scopeId","data-v-113b1b22"]]);var ea=Ze,aa=t(1058),ta=t(31);const oa={class:"min-h-screen bg-gray-100 flex flex-col justify-center items-center px-4 py-8"},na={class:"text-center"},ra={class:"mt-12"};var sa={__name:"NotFound",setup(e){return(e,a)=>{const t=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",oa,[(0,n.Lk)("div",na,[a[1]||(a[1]=(0,n.Lk)("h1",{class:"text-6xl font-bold text-gray-900 mb-4"},"404",-1)),a[2]||(a[2]=(0,n.Lk)("h2",{class:"text-3xl font-semibold text-gray-700 mb-6"},"P谩gina no encontrada",-1)),a[3]||(a[3]=(0,n.Lk)("p",{class:"text-xl text-gray-600 mb-8"},"Lo sentimos, la p谩gina que est谩s buscando no existe.",-1)),(0,n.bF)(t,{to:"/",class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out"},{default:(0,n.k6)((()=>[(0,n.bF)((0,g.R1)(aa.A),{class:"w-5 h-5 mr-2"}),a[0]||(a[0]=(0,n.eW)(" Volver al inicio "))])),_:1})]),(0,n.Lk)("div",ra,[(0,n.bF)((0,g.R1)(ta.A),{class:"w-24 h-24 text-yellow-500 mx-auto"})])])}}};const ia=sa;var la=ia;const ca=[{path:"/",name:"FileUploadPage",component:H,meta:{requiresAuth:!0}},{path:"/register/:jwt",name:"Register",component:re},{path:"/error",name:"Error",component:ve},{path:"/verificacion-biometrica",name:"VerificacionBiometrica",component:Fe,meta:{requiresAuth:!0}},{path:"/verify_liveness",name:"verify_liveness",component:Ve,meta:{requiresAuth:!0}},{path:"/success",name:"SuccessProcess",component:Xe},{path:"/outstanding",name:"Outstanding",component:ea},{path:"/:pathMatch(.*)*",name:"NotFound",component:la}],ua=(0,d.aE)({history:(0,d.LA)(),routes:ca}),da=e=>{if(!e)return!1;try{const a=(0,v.s)(e);return 1e3*a.exp>Date.now()}catch{return!1}};ua.beforeEach(((e,a,t)=>{const o=p.A.get("token");!e.matched.some((e=>e.meta.requiresAuth))||da(o)?t():t({path:"/error"})}));var va=ua;(0,o.Ef)(u).use(va).mount("#app")}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var r=a[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,o,n,r){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],r=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var c=n();void 0!==c&&(a=c)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,n,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,o){var n,r,s=o[0],i=o[1],l=o[2],c=0;if(s.some((function(a){return 0!==e[a]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(l)var u=l(t)}for(a&&a(o);c<s.length;c++)r=s[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},o=self["webpackChunkface_id"]=self["webpackChunkface_id"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(7947)}));o=t.O(o)})();
//# sourceMappingURL=app.d46c6238.js.map